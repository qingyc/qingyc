<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>青同学</title>
  
  <subtitle>啦啦啦啦啦</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://qingyc.github.io/"/>
  <updated>2019-08-24T17:13:48.263Z</updated>
  <id>http://qingyc.github.io/</id>
  
  <author>
    <name>青同学</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JAVA多线程编程核心技术 摘</title>
    <link href="http://qingyc.github.io/2019/08/25/JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/"/>
    <id>http://qingyc.github.io/2019/08/25/JAVA多线程编程核心技术/</id>
    <published>2019-08-24T17:09:12.000Z</published>
    <updated>2019-08-24T17:13:48.263Z</updated>
    
    <content type="html"><![CDATA[<p>JAVA多线程编程核心技术 大概点</p><p><img src="JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF.png" alt="JAVA多线程编程核心技术 摘"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;JAVA多线程编程核心技术 大概点&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF.png&quot; alt=&quot;JAVA多线
      
    
    </summary>
    
      <category term="Java" scheme="http://qingyc.github.io/categories/Java/"/>
    
    
      <category term="Java" scheme="http://qingyc.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>adb</title>
    <link href="http://qingyc.github.io/2019/08/18/adb/"/>
    <id>http://qingyc.github.io/2019/08/18/adb/</id>
    <published>2019-08-18T08:25:35.000Z</published>
    <updated>2019-08-18T08:34:06.624Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Adb常用命令小结"><a href="#Adb常用命令小结" class="headerlink" title="Adb常用命令小结"></a>Adb常用命令小结</h1><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb version  显示 adb 版本 </span><br><span class="line">adb help  帮助 </span><br><span class="line">adb start-server  启动 adb</span><br><span class="line">adb kill-server  停止 adb 服务器</span><br></pre></td></tr></table></figure><h3 id="一-设备控制"><a href="#一-设备控制" class="headerlink" title="一.设备控制"></a>一.设备控制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-d指定当前唯一通过 USB 连接的 Android 设备为命令目标</span><br><span class="line">-e指定当前唯一运行的模拟器为命令目标</span><br><span class="line">-s &lt;serialNumber&gt;指定相应 serialNumber 号的设备/模拟器为命令目标</span><br><span class="line"></span><br><span class="line">adb devices 显示设备</span><br><span class="line">adb reboot 重启</span><br><span class="line">adb -s 选择设备</span><br><span class="line"></span><br><span class="line">例:</span><br><span class="line">adb -s emulator-5556 reboot   重启 emulator-5556</span><br></pre></td></tr></table></figure><h3 id="二-安装卸载"><a href="#二-安装卸载" class="headerlink" title="二.安装卸载"></a>二.安装卸载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb install  path_to_apk</span><br><span class="line">adb uninstall packageName</span><br></pre></td></tr></table></figure><h3 id="三-文件复制到设备"><a href="#三-文件复制到设备" class="headerlink" title="三.文件复制到设备"></a>三.文件复制到设备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb pull remote local</span><br><span class="line">adb push local remote</span><br></pre></td></tr></table></figure><p>在上述命令中，local 和 remote 指的是开发计算机（本地）和模拟器/设备实例（远程）上目标文件/目录的路径。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb push foo.txt /sdcard/foo.txt</span><br></pre></td></tr></table></figure><h3 id="四-Shell-在目标模拟器-设备实例中启动远程-shell"><a href="#四-Shell-在目标模拟器-设备实例中启动远程-shell" class="headerlink" title="四.Shell 在目标模拟器/设备实例中启动远程 shell"></a>四.Shell 在目标模拟器/设备实例中启动远程 shell</h3><p>不进入模拟器/设备实例上的 adb 远程 shell 发出设备命令:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb [-d|-e|-s serial_number] shell shell_command</span><br></pre></td></tr></table></figure><p>进入模拟器/设备实例上的远程 shell：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb [-d|-e|-s serial_number] shell</span><br></pre></td></tr></table></figure><p>当您准备退出远程 shell 时，按 Control + D 或输入 exit。</p><p>shell 命令二进制文件存储在模拟器或设备的文件系统中，其路径为 /system/bin/</p><h4 id="4-1-获取设备信息"><a href="#4-1-获取设备信息" class="headerlink" title="4.1 获取设备信息"></a>4.1 获取设备信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop</span><br></pre></td></tr></table></figure><h4 id="4-2-Window-manager"><a href="#4-2-Window-manager" class="headerlink" title="4.2 Window manager"></a>4.2 Window manager</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm</span><br></pre></td></tr></table></figure><p>帮助</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Window manager (window) commands:</span><br><span class="line">  help</span><br><span class="line">      Print this help text.</span><br><span class="line">  size [reset|WxH|WdpxHdp]</span><br><span class="line">    Return or override display size.</span><br><span class="line">    width and height in pixels unless suffixed with &apos;dp&apos;.</span><br><span class="line">  density [reset|DENSITY]</span><br><span class="line">    Return or override display density.</span><br><span class="line">  overscan [reset|LEFT,TOP,RIGHT,BOTTOM]</span><br><span class="line">    Set overscan area for display.</span><br><span class="line">  scaling [off|auto]</span><br><span class="line">    Set display scaling mode.</span><br><span class="line">  dismiss-keyguard</span><br></pre></td></tr></table></figure><p>例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">获取屏幕尺寸命令:</span><br><span class="line">adb shell wm size</span><br><span class="line"></span><br><span class="line">返回结果:</span><br><span class="line">Physical size: 1080x2160</span><br></pre></td></tr></table></figure><h4 id="4-3-am-Activity-Manager"><a href="#4-3-am-Activity-Manager" class="headerlink" title="4.3 am Activity Manager"></a>4.3 am Activity Manager</h4><p>在 adb shell 中，您可以使用 Activity Manager (am) 工具发出命令以执行各种系统操作，如启动 Activity、强行停止进程、广播 intent、修改设备屏幕属性及其他操作</p><h5 id="4-3-1-常用命令"><a href="#4-3-1-常用命令" class="headerlink" title="4.3.1 常用命令:"></a>4.3.1 常用命令:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">启动 </span><br><span class="line">adb shell am start -n 包名/activity名(全路径)</span><br><span class="line">关闭</span><br><span class="line">adb shell am force-stop 包名</span><br><span class="line">例:打开浏览器</span><br><span class="line">先 adb shell 再:</span><br><span class="line">打开浏览器</span><br><span class="line">am start -a android.intent.action.VIEW -d  http://www.google.cn/</span><br></pre></td></tr></table></figure><h5 id="4-3-2-start-启动-intent-指定的-Activity"><a href="#4-3-2-start-启动-intent-指定的-Activity" class="headerlink" title="4.3.2 start 启动 intent 指定的 Activity"></a>4.3.2 start 启动 intent 指定的 Activity</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">start [options] intent启动 intent 指定的 Activity。</span><br><span class="line">请参阅 intent 参数的规范。</span><br><span class="line"></span><br><span class="line">选项包括：</span><br><span class="line"></span><br><span class="line">-D：启用调试。</span><br><span class="line">-W：等待启动完成。</span><br><span class="line">--start-profiler file：启动分析器并将结果发送到 file。</span><br><span class="line">-P file：类似于 --start-profiler，但当应用进入空闲状态时分析停止。</span><br><span class="line">-R count：重复 Activity 启动 count 次数。在每次重复前，将完成顶部 Activity。</span><br><span class="line">-S：启动 Activity 前强行停止目标应用。</span><br><span class="line">--opengl-trace：启用 OpenGL 函数的跟踪。</span><br><span class="line">--user user_id | current：指定要作为哪个用户运行；如果未指定，则作为当前用户运行。</span><br></pre></td></tr></table></figure><h5 id="4-3-3-startService-启动-intent-指定的-Service"><a href="#4-3-3-startService-启动-intent-指定的-Service" class="headerlink" title="4.3.3 startService 启动 intent 指定的 Service"></a>4.3.3 startService 启动 intent 指定的 Service</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startservice [options] intent</span><br></pre></td></tr></table></figure><h5 id="4-3-4-other"><a href="#4-3-4-other" class="headerlink" title="4.3.4 other"></a>4.3.4 other</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">broadcast [options] intent发出广播 intent</span><br><span class="line">force-stop package强行停止与 package（应用的包名称）关联的所有应用</span><br><span class="line">kill [options] package终止与 package（应用的包名称）关联的所有进程。此命令仅终止可安全终止且不会影响用户体验的进程</span><br><span class="line">kill-all终止所有后台进程</span><br><span class="line">clear-debug-app使用 set-debug-app 清除以前针对调试用途设置的软件包</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h5 id="4-3-5-intent-参数的规范"><a href="#4-3-5-intent-参数的规范" class="headerlink" title="4.3.5 intent 参数的规范"></a>4.3.5 intent 参数的规范</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">对于采用 intent 参数的 Activity Manager 命令，您可以使用以下选项指定 intent：</span><br><span class="line"></span><br><span class="line">-a action</span><br><span class="line">指定 intent 操作，如“android.intent.action.VIEW”。此指定只能声明一次。</span><br><span class="line">-d data_uri</span><br><span class="line">指定 intent 数据 URI，如“content://contacts/people/1”。此指定只能声明一次。</span><br><span class="line">-t mime_type</span><br><span class="line">指定 intent MIME 类型，如“image/png”。此指定只能声明一次。</span><br><span class="line">-c category</span><br><span class="line">指定 intent 类别，如“android.intent.category.APP_CONTACTS”。</span><br><span class="line">-n component</span><br><span class="line">指定带有软件包名称前缀的组件名称以创建显式 intent，如“com.example.app/.ExampleActivity”。</span><br><span class="line">-f flags</span><br><span class="line">将标志添加到 setFlags() 支持的 intent。</span><br></pre></td></tr></table></figure><h4 id="4-4-pm-调用软件包管理器"><a href="#4-4-pm-调用软件包管理器" class="headerlink" title="4.4 pm 调用软件包管理器"></a>4.4 pm 调用软件包管理器</h4><p>查看帮助</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">shell@JDtab:/ $ pm</span><br><span class="line">usage: pm list packages [-f] [-d] [-e] [-s] [-3] [-i] [-u] [--user USER_ID] [FILTER]</span><br><span class="line">       pm list permission-groups</span><br><span class="line">       pm list permissions [-g] [-f] [-d] [-u] [GROUP]</span><br><span class="line">       pm list instrumentation [-f] [TARGET-PACKAGE]</span><br><span class="line">       pm list features</span><br><span class="line">       pm list libraries</span><br><span class="line">       pm list users</span><br><span class="line">       pm path PACKAGE</span><br><span class="line">       pm dump PACKAGE</span><br><span class="line">       pm install [-lrtsfd] [-i PACKAGE] [--user USER_ID] [PATH]</span><br><span class="line">       pm install-create [-lrtsfdp] [-i PACKAGE] [-S BYTES]</span><br><span class="line">               [--install-location 0/1/2]</span><br><span class="line">               [--force-uuid internal|UUID]</span><br><span class="line">       pm install-write [-S BYTES] SESSION_ID SPLIT_NAME [PATH]</span><br><span class="line">       pm install-commit SESSION_ID</span><br><span class="line">       pm install-abandon SESSION_ID</span><br><span class="line">       pm uninstall [-k] [--user USER_ID] PACKAGE</span><br><span class="line">       pm set-installer PACKAGE INSTALLER</span><br><span class="line">       pm move-package PACKAGE [internal|UUID]</span><br><span class="line">       pm move-primary-storage [internal|UUID]</span><br><span class="line">       pm clear [--user USER_ID] PACKAGE</span><br><span class="line">       pm enable [--user USER_ID] PACKAGE_OR_COMPONENT</span><br><span class="line">       pm disable [--user USER_ID] PACKAGE_OR_COMPONENT</span><br><span class="line">       pm disable-user [--user USER_ID] PACKAGE_OR_COMPONENT</span><br><span class="line">       pm disable-until-used [--user USER_ID] PACKAGE_OR_COMPONENT</span><br><span class="line">       pm hide [--user USER_ID] PACKAGE_OR_COMPONENT</span><br><span class="line">       pm unhide [--user USER_ID] PACKAGE_OR_COMPONENT</span><br><span class="line">       pm grant [--user USER_ID] PACKAGE PERMISSION</span><br><span class="line">       pm revoke [--user USER_ID] PACKAGE PERMISSION</span><br><span class="line">       pm reset-permissions</span><br><span class="line">       pm set-app-link [--user USER_ID] PACKAGE &#123;always|ask|never|undefined&#125;</span><br><span class="line">       pm get-app-link [--user USER_ID] PACKAGE</span><br><span class="line">       pm set-install-location [0/auto] [1/internal] [2/external]</span><br><span class="line">       pm get-install-location</span><br><span class="line">       pm set-permission-enforced PERMISSION [true|false]</span><br><span class="line">       pm trim-caches DESIRED_FREE_SPACE [internal|UUID]</span><br><span class="line">       pm create-user [--profileOf USER_ID] [--managed] USER_NAME</span><br><span class="line">       pm remove-user USER_ID</span><br><span class="line">       pm get-max-users</span><br><span class="line"></span><br><span class="line">pm list packages: prints all packages, optionally only</span><br><span class="line">  those whose package name contains the text in FILTER.  Options:</span><br><span class="line">    -f: see their associated file.</span><br><span class="line">    -d: filter to only show disbled packages.</span><br><span class="line">    -e: filter to only show enabled packages.</span><br><span class="line">    -s: filter to only show system packages.</span><br><span class="line">    -3: filter to only show third party packages.</span><br><span class="line">    -i: see the installer for the packages.</span><br><span class="line">    -u: also include uninstalled packages.</span><br><span class="line"></span><br><span class="line">pm list permission-groups: prints all known permission groups.</span><br><span class="line"></span><br><span class="line">pm list permissions: prints all known permissions, optionally only</span><br><span class="line">  those in GROUP.  Options:</span><br><span class="line">    -g: organize by group.</span><br><span class="line">    -f: print all information.</span><br><span class="line">    -s: short summary.</span><br><span class="line">    -d: only list dangerous permissions.</span><br><span class="line">    -u: list only the permissions users will see.</span><br><span class="line"></span><br><span class="line">pm list instrumentation: use to list all test packages; optionally</span><br><span class="line">  supply &lt;TARGET-PACKAGE&gt; to list the test packages for a particular</span><br><span class="line">  application.  Options:</span><br><span class="line">    -f: list the .apk file for the test package.</span><br><span class="line"></span><br><span class="line">pm list features: prints all features of the system.</span><br><span class="line"></span><br><span class="line">pm list users: prints all users on the system.</span><br><span class="line"></span><br><span class="line">pm path: print the path to the .apk of the given PACKAGE.</span><br><span class="line"></span><br><span class="line">pm dump: print system state associated with the given PACKAGE.</span><br><span class="line"></span><br><span class="line">pm install: install a single legacy package</span><br><span class="line">pm install-create: create an install session</span><br><span class="line">    -l: forward lock application</span><br><span class="line">    -r: replace existing application</span><br><span class="line">    -t: allow test packages</span><br><span class="line">    -i: specify the installer package name</span><br><span class="line">    -s: install application on sdcard</span><br><span class="line">    -f: install application on internal flash</span><br><span class="line">    -d: allow version code downgrade</span><br><span class="line">    -p: partial application install</span><br><span class="line">    -g: grant all runtime permissions</span><br><span class="line">    -S: size in bytes of entire session</span><br><span class="line"></span><br><span class="line">pm install-write: write a package into existing session; path may</span><br><span class="line">  be &apos;-&apos; to read from stdin</span><br><span class="line">    -S: size in bytes of package, required for stdin</span><br><span class="line"></span><br><span class="line">pm install-commit: perform install of fully staged session</span><br><span class="line">pm install-abandon: abandon session</span><br><span class="line"></span><br><span class="line">pm set-installer: set installer package name</span><br><span class="line"></span><br><span class="line">pm uninstall: removes a package from the system. Options:</span><br><span class="line">    -k: keep the data and cache directories around after package removal.</span><br><span class="line"></span><br><span class="line">pm clear: deletes all data associated with a package.</span><br><span class="line"></span><br><span class="line">pm enable, disable, disable-user, disable-until-used: these commands</span><br><span class="line">  change the enabled state of a given package or component (written</span><br><span class="line">  as &quot;package/class&quot;).</span><br><span class="line"></span><br><span class="line">pm grant, revoke: these commands either grant or revoke permissions</span><br><span class="line">    to apps. The permissions must be declared as used in the app&apos;s</span><br><span class="line">    manifest, be runtime permissions (protection level dangerous),</span><br><span class="line">    and the app targeting SDK greater than Lollipop MR1.</span><br><span class="line"></span><br><span class="line">pm reset-permissions: revert all runtime permissions to their default state.</span><br><span class="line"></span><br><span class="line">pm get-install-location: returns the current install location.</span><br><span class="line">    0 [auto]: Let system decide the best location</span><br><span class="line">    1 [internal]: Install on internal device storage</span><br><span class="line">    2 [external]: Install on external media</span><br><span class="line"></span><br><span class="line">pm set-install-location: changes the default install location.</span><br><span class="line">  NOTE: this is only intended for debugging; using this can cause</span><br><span class="line">  applications to break and other undersireable behavior.</span><br><span class="line">    0 [auto]: Let system decide the best location</span><br><span class="line">    1 [internal]: Install on internal device storage</span><br><span class="line">    2 [external]: Install on external media</span><br><span class="line"></span><br><span class="line">pm trim-caches: trim cache files to reach the given free space.</span><br><span class="line"></span><br><span class="line">pm create-user: create a new user with the given USER_NAME,</span><br><span class="line">  printing the new user identifier of the user.</span><br><span class="line"></span><br><span class="line">pm remove-user: remove the user with the given USER_IDENTIFIER,</span><br><span class="line">  deleting all data associated with that user</span><br><span class="line"></span><br><span class="line">1|shell@JDtab:/ $</span><br></pre></td></tr></table></figure><h5 id="4-4-1-list"><a href="#4-4-1-list" class="headerlink" title="4.4.1 list"></a>4.4.1 list</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">list packages [options] filter输出所有软件包，或者，仅输出包名称包含 filter 中的文本的软件包。</span><br><span class="line"> </span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">-f：查看它们的关联文件。</span><br><span class="line">-d：进行过滤以仅显示已停用的软件包。</span><br><span class="line">-e：进行过滤以仅显示已启用的软件包。</span><br><span class="line">-s：进行过滤以仅显示系统软件包。</span><br><span class="line">-3：进行过滤以仅显示第三方软件包。</span><br><span class="line">-i：查看软件包的安装程序。</span><br><span class="line">-u：也包括卸载的软件包。</span><br><span class="line">--user user_id：要查询的用户空间。</span><br><span class="line">例:</span><br><span class="line">adb shell pm list packages</span><br><span class="line">adb shell pm list packages -s 系统app</span><br><span class="line">adb shell pm list packages -3 第三方app</span><br></pre></td></tr></table></figure><h5 id="4-4-2-install-and-uninstall"><a href="#4-4-2-install-and-uninstall" class="headerlink" title="4.4.2 install and uninstall"></a>4.4.2 install and uninstall</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">install [options] path将软件包（通过 path 指定）安装到系统。</span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">-l：安装具有转发锁定功能的软件包。</span><br><span class="line">-r：重新安装现有应用，保留其数据。</span><br><span class="line">-t：允许安装测试 APK。</span><br><span class="line">-i installer_package_name：指定安装程序软件包名称。</span><br><span class="line">-s：在共享的大容量存储（如 sdcard）上安装软件包。</span><br><span class="line">-f：在内部系统内存上安装软件包。</span><br><span class="line">-d：允许版本代码降级。</span><br><span class="line">-g：授予应用清单中列出的所有权限。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">uninstall [options] package从系统中移除软件包。</span><br><span class="line">选项：</span><br><span class="line"></span><br><span class="line">-k：移除软件包后保留数据和缓存目录。</span><br></pre></td></tr></table></figure><h5 id="4-4-3-清除数据和缓存"><a href="#4-4-3-清除数据和缓存" class="headerlink" title="4.4.3 清除数据和缓存"></a>4.4.3 清除数据和缓存</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm clear 包名</span><br><span class="line"></span><br><span class="line">例 清除qq数据</span><br><span class="line">1|shell@JDtab:/ $ pm clear com.tencent.mobileqq</span><br></pre></td></tr></table></figure><h4 id="4-5-ps-进程查看和操作"><a href="#4-5-ps-进程查看和操作" class="headerlink" title="4.5 ps 进程查看和操作"></a>4.5 ps 进程查看和操作</h4><p>帮助</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">adb shell ps --help</span><br><span class="line"></span><br><span class="line">usage: ps [-AadefLlnwZ] [-gG GROUP,] [-k FIELD,] [-o FIELD,] [-p PID,] [-t TTY,] [-uU USER,]</span><br><span class="line"></span><br><span class="line">List processes.</span><br><span class="line"></span><br><span class="line">Which processes to show (selections may be comma separated lists):</span><br><span class="line"></span><br><span class="line">-AAll processes</span><br><span class="line">-aProcesses with terminals that aren&apos;t session leaders</span><br><span class="line">-dAll processes that aren&apos;t session leaders</span><br><span class="line">-eSame as -A</span><br><span class="line">-gBelonging to GROUPs</span><br><span class="line">-GBelonging to real GROUPs (before sgid)</span><br><span class="line">-pPIDs (--pid)</span><br><span class="line">-PParent PIDs (--ppid)</span><br><span class="line">-sIn session IDs</span><br><span class="line">-tAttached to selected TTYs</span><br><span class="line">-TShow threads</span><br><span class="line">-uOwned by USERs</span><br><span class="line">-UOwned by real USERs (before suid)</span><br><span class="line"></span><br><span class="line">.....</span><br></pre></td></tr></table></figure><p>常用进程查看操作</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell ps | grep 关键字  :显示进程</span><br><span class="line">adb shell cat/proc/进程id/oom_adj  显示进程优先级</span><br><span class="line">adb shell kill [pid]</span><br></pre></td></tr></table></figure><p>例:显示所有腾讯app进程</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">adb shell ps | grep tencent</span><br><span class="line"></span><br><span class="line">u0_a156        544   638 1313424  60448 0                   0 S com.tencent.tim:Daemon</span><br><span class="line">u0_a156        623   638 1314488  60152 0                   0 S com.tencent.tim:assist</span><br><span class="line">u0_a182        857   638 1385176  78028 0                   0 S com.tencent.mobileqq:MSF</span><br><span class="line">u0_a165       1636   638 2473248 323928 0                   0 S com.tencent.mm</span><br><span class="line">u0_a165       2204   638 2090388 117860 0                   0 S com.tencent.mm:push</span><br><span class="line">system       10200   637 3924720  40540 0                   0 S com.tencent.soter.soterserver</span><br><span class="line">u0_a156      10335   638 1334496  68572 0                   0 S com.tencent.tim:MSF</span><br><span class="line">u0_a156      23472   638 1396960 107396 0                   0 S com.tencent.tim:mail</span><br></pre></td></tr></table></figure><h4 id="4-6-输入-input"><a href="#4-6-输入-input" class="headerlink" title="4.6 输入 input"></a>4.6 输入 input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">input  &lt;command&gt; [&lt;arg&gt;...]</span><br><span class="line"></span><br><span class="line">查看帮助</span><br><span class="line">shell@JDtab:/ $ input help</span><br><span class="line">Error: Unknown command: help</span><br><span class="line">Usage: input [&lt;source&gt;] &lt;command&gt; [&lt;arg&gt;...]</span><br><span class="line"></span><br><span class="line">The sources are: </span><br><span class="line">      mouse</span><br><span class="line">      keyboard</span><br><span class="line">      joystick</span><br><span class="line">      touchnavigation</span><br><span class="line">      touchpad</span><br><span class="line">      trackball</span><br><span class="line">      stylus</span><br><span class="line">      dpad</span><br><span class="line">      touchscreen</span><br><span class="line">      gamepad</span><br><span class="line"></span><br><span class="line">The commands and default sources are:</span><br><span class="line">      text &lt;string&gt; (Default: touchscreen)</span><br><span class="line">      keyevent [--longpress] &lt;key code number or name&gt; ... (Default: keyboard)</span><br><span class="line">      tap &lt;x&gt; &lt;y&gt; (Default: touchscreen)</span><br><span class="line">      swipe &lt;x1&gt; &lt;y1&gt; &lt;x2&gt; &lt;y2&gt; [duration(ms)] (Default: touchscreen)</span><br><span class="line">      press (Default: trackball)</span><br><span class="line">      roll &lt;dx&gt; &lt;dy&gt; (Default: trackball)</span><br><span class="line">      3dtouch &lt;x&gt; &lt;y&gt; &lt;z&gt;(Default: touchscreen)</span><br><span class="line">shell@JDtab:/ $ </span><br><span class="line"></span><br><span class="line">sources? 好像用不上 主要是commands的使用</span><br><span class="line"></span><br><span class="line">模拟输入文字</span><br><span class="line">adb shell input text &quot;hahah&quot; 注意输入中文时键盘模式需要是中文 同理英文</span><br><span class="line"></span><br><span class="line">模拟点击屏幕</span><br><span class="line">input tap 123 312     </span><br><span class="line"></span><br><span class="line">模拟模拟按键</span><br><span class="line">input keyevent 3 返回桌面</span><br><span class="line">常用按键 event</span><br><span class="line">1menuKEYCODE_MENU</span><br><span class="line">3homeKEYCODE_HOME</span><br><span class="line">4backKEYCODE_BACK</span><br><span class="line">21光标左移KEYCODE_DPAD_LEFT</span><br><span class="line">22光标右移KEYCODE_DPAD_RIGHT</span><br><span class="line">67删除KEYCODE_DEL</span><br></pre></td></tr></table></figure><h4 id="4-7-截图和录屏"><a href="#4-7-截图和录屏" class="headerlink" title="4.7 截图和录屏"></a>4.7 截图和录屏</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">截图</span><br><span class="line">adb shell screencap  /sdcard/我是截图.png  </span><br><span class="line"></span><br><span class="line">录屏</span><br><span class="line">如果不设置时间默认3分钟, 使用 --time-limit 设置截屏时间</span><br><span class="line">adb shell screenrecord /sdcard/我是视频.mp4 --time-limit 12</span><br><span class="line">录屏帮助</span><br><span class="line">screedrecord --help</span><br><span class="line"></span><br><span class="line">截图和录屏完毕后可退出 shell,使用  `adb pull /sdcard/我是视频.mp4` 把文件从手机复制到电脑</span><br></pre></td></tr></table></figure><h4 id="4-8-monkey"><a href="#4-8-monkey" class="headerlink" title="4.8 monkey"></a>4.8 monkey</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">查看帮助</span><br><span class="line">shell@JDtab:/ $ monkey help                                                    </span><br><span class="line">** Error: Count is not a number</span><br><span class="line">usage: monkey [-p ALLOWED_PACKAGE [-p ALLOWED_PACKAGE] ...]</span><br><span class="line">              [-c MAIN_CATEGORY [-c MAIN_CATEGORY] ...]</span><br><span class="line">              [--ignore-crashes] [--ignore-timeouts]</span><br><span class="line">              [--ignore-security-exceptions]</span><br><span class="line">              [--monitor-native-crashes] [--ignore-native-crashes]</span><br><span class="line">              [--kill-process-after-error] [--hprof]</span><br><span class="line">              [--pct-touch PERCENT] [--pct-motion PERCENT]</span><br><span class="line">              [--pct-trackball PERCENT] [--pct-syskeys PERCENT]</span><br><span class="line">              [--pct-nav PERCENT] [--pct-majornav PERCENT]</span><br><span class="line">              [--pct-appswitch PERCENT] [--pct-flip PERCENT]</span><br><span class="line">              [--pct-anyevent PERCENT] [--pct-pinchzoom PERCENT]</span><br><span class="line">              [--pct-permission PERCENT]</span><br><span class="line">              [--pkg-blacklist-file PACKAGE_BLACKLIST_FILE]</span><br><span class="line">              [--pkg-whitelist-file PACKAGE_WHITELIST_FILE]</span><br><span class="line">              [--wait-dbg] [--dbg-no-events]</span><br><span class="line">              [--setup scriptfile] [-f scriptfile [-f scriptfile] ...]</span><br><span class="line">              [--port port]</span><br><span class="line">              [-s SEED] [-v [-v] ...]</span><br><span class="line">              [--throttle MILLISEC] [--randomize-throttle]</span><br><span class="line">              [--profile-wait MILLISEC]</span><br><span class="line">              [--device-sleep-time MILLISEC]</span><br><span class="line">              [--randomize-script]</span><br><span class="line">              [--script-log]</span><br><span class="line">              [--bugreport]</span><br><span class="line">              [--periodic-bugreport]</span><br><span class="line">              [--permission-target-system]</span><br><span class="line">              COUNT</span><br><span class="line"></span><br><span class="line">255|shell@JDtab:/ $ </span><br><span class="line">例:</span><br><span class="line">adb shell monkey -v -p your.package.name 500</span><br></pre></td></tr></table></figure><h3 id="五-dumpsys-将系统数据转储到屏幕"><a href="#五-dumpsys-将系统数据转储到屏幕" class="headerlink" title="五.dumpsys 将系统数据转储到屏幕"></a>五.dumpsys 将系统数据转储到屏幕</h3><p><a href="https://developer.android.com/studio/command-line/dumpsys" target="_blank" rel="noopener">developer.android.com</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">命令格式</span><br><span class="line">adb shell dumpsys [-t timeout] [--help | -l | --skip services | service [arguments] | -c | -h]</span><br><span class="line"></span><br><span class="line">选项说明</span><br><span class="line">-t timeout指定时间 默认10秒</span><br><span class="line">--help 查看帮助</span><br><span class="line">-l列出可用参数列表</span><br><span class="line">--skip servicesSpecifies the services that you do not want to include in the output.</span><br><span class="line">service [arguments]Specifies the service that you want to output. Some services may allow you to pass optional arguments. You can learn about these optional arguments by passing the -h option with the service, as shown below:</span><br><span class="line">adb shell dumpsys procstats -h</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">-cWhen specifying certain services, append this option to output data in a machine-friendly format.</span><br><span class="line">-hFor certain services, append this option to see help text and additional options for that service.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">常用</span><br><span class="line">dumpsys activity AMS服务相关信息</span><br><span class="line">dumpsys window  WMS服务相关信息</span><br><span class="line">dumpsys cpuinfo CPU信息</span><br><span class="line">dumpsys meminfo 内存信息</span><br></pre></td></tr></table></figure><ul><li>dumpsys activity</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">查看帮助</span><br><span class="line">adb shell dumpsys activity -h</span><br><span class="line"> </span><br><span class="line">Activity manager dump options:</span><br><span class="line">  [-a] [-c] [-p PACKAGE] [-h] [WHAT] ...</span><br><span class="line">  WHAT may be one of:</span><br><span class="line">    a[ctivities]: activity stack state //查看activity</span><br><span class="line">    r[recents]: recent activities state </span><br><span class="line">    b[roadcasts] [PACKAGE_NAME] [history [-s]]: broadcast state</span><br><span class="line">    broadcast-stats [PACKAGE_NAME]: aggregated broadcast statistics</span><br><span class="line">    i[ntents] [PACKAGE_NAME]: pending intent state</span><br><span class="line">    p[rocesses] [PACKAGE_NAME]: process state</span><br><span class="line">    o[om]: out of memory management</span><br><span class="line">    perm[issions]: URI permission grant state</span><br><span class="line">    prov[iders] [COMP_SPEC ...]: content provider state</span><br><span class="line">    provider [COMP_SPEC]: provider client-side state</span><br><span class="line">    s[ervices] [COMP_SPEC ...]: service state //服务</span><br><span class="line">    as[sociations]: tracked app associations</span><br><span class="line">    settings: currently applied config settings</span><br><span class="line">    service [COMP_SPEC]: service client-side state</span><br><span class="line">    package [PACKAGE_NAME]: all state related to given package</span><br><span class="line">    all: dump all activities</span><br><span class="line">    top: dump the top activity</span><br><span class="line">  WHAT may also be a COMP_SPEC to dump activities.</span><br><span class="line">  COMP_SPEC may be a component name (com.foo/.myApp),</span><br><span class="line">    a partial substring in a component name, a</span><br><span class="line">    hex object identifier.</span><br><span class="line">  -a: include all available server state.</span><br><span class="line">  -c: include client state.</span><br><span class="line">  -p: limit output to given package.</span><br><span class="line">  --checkin: output checkin format, resetting data.</span><br><span class="line">  --C: output checkin format, not resetting data.</span><br><span class="line">  --proto: output dump in protocol buffer format.</span><br><span class="line">  --autofill: dump just the autofill-related state of an activity</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">例:</span><br><span class="line">   查看acitivty信息</span><br><span class="line">   adb shell dumpsys activity activities 或者 adb shell dumpsys activity a   </span><br><span class="line">查看微信所有服务</span><br><span class="line"> adb shell dumpsys activity s com.tencent.mm</span><br></pre></td></tr></table></figure><p>查看当前activity</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity activities | grep &quot;mResumedActivity&quot;</span><br></pre></td></tr></table></figure><p><a href="https://developer.android.com/studio/command-line/adb?hl=zh-cn" target="_blank" rel="noopener">详细Adb常用命令</a>   </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Adb常用命令小结&quot;&gt;&lt;a href=&quot;#Adb常用命令小结&quot; class=&quot;headerlink&quot; title=&quot;Adb常用命令小结&quot;&gt;&lt;/a&gt;Adb常用命令小结&lt;/h1&gt;&lt;h3 id=&quot;基础&quot;&gt;&lt;a href=&quot;#基础&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="Adb" scheme="http://qingyc.github.io/categories/Adb/"/>
    
    
      <category term="Android" scheme="http://qingyc.github.io/tags/Android/"/>
    
      <category term="adb" scheme="http://qingyc.github.io/tags/adb/"/>
    
  </entry>
  
  <entry>
    <title>kotlin泛型相关_reifield</title>
    <link href="http://qingyc.github.io/2019/08/18/kotlin%E6%B3%9B%E5%9E%8B%E7%9B%B8%E5%85%B3-reifield/"/>
    <id>http://qingyc.github.io/2019/08/18/kotlin泛型相关-reifield/</id>
    <published>2019-08-18T08:18:45.000Z</published>
    <updated>2019-08-18T08:34:24.468Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kotlin泛型"><a href="#Kotlin泛型" class="headerlink" title="Kotlin泛型"></a>Kotlin泛型</h1><h3 id="1-reified的作用"><a href="#1-reified的作用" class="headerlink" title="1.reified的作用"></a>1.reified的作用</h3><p><a href="https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md" target="_blank" rel="noopener">https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md</a></p><p><strong>支持通过方法传递的类型运行时可用可达</strong></p><p>由于java泛型是伪泛型,为了兼容java1.5以前的版本,java运行时,会泛型擦除 会擦除为泛型上界,如果没有泛型上界会擦除为Object,所以jvm在程序运行时是不知道泛型的真实类型,  <strong>reifield</strong> 能保证运行时依然能拿到泛型的具体类型.(当前只限制支持内联函数可用)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Reified Type Parameters</span><br><span class="line"></span><br><span class="line">Goal: support run-time access to types passed to functions, as if they were reified (currently limited to inline functions only).</span><br><span class="line"></span><br><span class="line">## Syntax</span><br><span class="line"></span><br><span class="line">A type parameter of a function can be marked as `reified`:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">inline fun foo&lt;reified T&gt;() &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="2-实际使用"><a href="#2-实际使用" class="headerlink" title="2.实际使用"></a>2.实际使用</h3><p><strong>Activity定义扩展函数</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T : Activity&gt;</span> Activity.<span class="title">startActivityKtx</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.startActivity(Intent(<span class="keyword">this</span>, T::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>))</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T : Activity&gt;</span> Activity.<span class="title">startActivityKtxWithParam</span><span class="params">(block: (<span class="type">intent</span>: <span class="type">Intent</span>)</span></span> -&gt; Any) &#123;</span><br><span class="line">    <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>, T::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">    block.invoke(intent)</span><br><span class="line">    <span class="keyword">this</span>.startActivity(intent)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//跳转Activity 带参数</span></span><br><span class="line">startActivityKtxWithParam&lt;TemplateListActivity&gt; &#123;</span><br><span class="line">                            it.putExtra(TemplateListActivity.KEY_CATEGORY_NAME, datas[position].categoryName)</span><br><span class="line">                        &#125;</span><br><span class="line">                        </span><br><span class="line">                        </span><br><span class="line"> <span class="comment">//跳转Activity   不带参数                    </span></span><br><span class="line">startActivityKtx&lt;MoreActivity&gt;()</span><br></pre></td></tr></table></figure><p>如果不用reifield 我们的写法是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fun Activity.startActivityKtx(cls: Class&lt;*&gt;) &#123;</span><br><span class="line">    this.startActivity(Intent(this, cls))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startActivityKtx(Intent(this, MoreActivity::class.java))</span><br></pre></td></tr></table></figure><p><strong>String定义扩展函数</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">inline fun &lt;reified T&gt; String.jsonToObj(): T? &#123;</span><br><span class="line">    return try &#123;</span><br><span class="line">        val g = Gson()</span><br><span class="line">        val type = object : TypeToken&lt;T&gt;() &#123;&#125;.type</span><br><span class="line">        g.fromJson&lt;T&gt;(this, type)</span><br><span class="line">    &#125; catch (e: Exception) &#123;</span><br><span class="line">        null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">inline fun &lt;reified T&gt; String.jsonToObjList(): ArrayList&lt;T&gt;? &#123;</span><br><span class="line">    return try &#123;</span><br><span class="line">        val g = Gson()</span><br><span class="line">        val type = object : TypeToken&lt;ArrayList&lt;T&gt;&gt;() &#123;&#125;.type</span><br><span class="line">        return g.fromJson&lt;ArrayList&lt;T&gt;&gt;(this, type)</span><br><span class="line">    &#125; catch (e: Exception) &#123;</span><br><span class="line">        null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>json string直接转对象</p><p>1.json 格式</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"classic_08"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"classic"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"polygon_04"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"polygon"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"quote_02"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"quote"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"simple_03"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"simple"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"travel_07"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"travel"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"marble_06"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"marble"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"cloud_08"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"cloud"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"pic"</span>: <span class="string">"freedom_03"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"freedom"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>2.bean</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Parcelize</span><br><span class="line">data class TemplateCategoryItemInfo(@SerializedName(&quot;pic&quot;) var categoryCoverPic: String, @SerializedName(&quot;name&quot;) var categoryName: String) : Parcelable</span><br></pre></td></tr></table></figure><p>3.string 2 bean  (<strong>assets2String.jsonToObjList()</strong>)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class CategoryModel : IModel &#123;</span><br><span class="line"></span><br><span class="line">    fun getData(): ArrayList&lt;TemplateCategoryItemInfo&gt;? &#123;</span><br><span class="line">        val assets2String = ResourceUtils.readAssets2String(&quot;category.json&quot;)</span><br><span class="line">        return assets2String.jsonToObjList()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不使用reifeild</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fun &lt;T&gt; String.jsonToObj2(): T? &#123;</span><br><span class="line">    return try &#123;</span><br><span class="line">        val g = Gson()</span><br><span class="line">        val type = object : TypeToken&lt;T&gt;() &#123;&#125;.type</span><br><span class="line">        g.fromJson&lt;T&gt;(this, type)</span><br><span class="line">    &#125; catch (e: Exception) &#123;</span><br><span class="line">        null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="jsonToObj%E4%B8%8D%E4%BD%BF%E7%94%A8reifeild.png" alt="jsonToObj不使用reifeild"></p><p>可以看出Gson 在解析时是没有判断出泛型T的真实类型的</p><p>使用reifeild<br><img src="jsonToObj%E4%BD%BF%E7%94%A8reifeild.png" alt="jsonToObj使用reifeild"></p><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="[https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md](https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md)">reified-type-parameters.md</a></p><p><a href="https://juejin.im/post/5bd1d590518825288b398f46" target="_blank" rel="noopener">[译]Kotlin的独门秘籍Reified实化类型参数(上篇)</a></p><p><a href="https://juejin.im/entry/592958cfa22b9d00573a1d25" target="_blank" rel="noopener">我与 Kotlin 的爱恨情仇之浅谈 reified</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Kotlin泛型&quot;&gt;&lt;a href=&quot;#Kotlin泛型&quot; class=&quot;headerlink&quot; title=&quot;Kotlin泛型&quot;&gt;&lt;/a&gt;Kotlin泛型&lt;/h1&gt;&lt;h3 id=&quot;1-reified的作用&quot;&gt;&lt;a href=&quot;#1-reified的作用&quot; cla
      
    
    </summary>
    
      <category term="Kotlin" scheme="http://qingyc.github.io/categories/Kotlin/"/>
    
      <category term="Android" scheme="http://qingyc.github.io/categories/Kotlin/Android/"/>
    
    
      <category term="Android" scheme="http://qingyc.github.io/tags/Android/"/>
    
      <category term="Kotlin" scheme="http://qingyc.github.io/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>PorterDuffXfermode的一些使用问题</title>
    <link href="http://qingyc.github.io/2019/07/28/PorterDuffXfermode%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98/"/>
    <id>http://qingyc.github.io/2019/07/28/PorterDuffXfermode的一些使用问题/</id>
    <published>2019-07-28T05:39:56.000Z</published>
    <updated>2019-08-18T08:33:40.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PorterDuffXfermode的一些使用问题"><a href="#PorterDuffXfermode的一些使用问题" class="headerlink" title="PorterDuffXfermode的一些使用问题"></a>PorterDuffXfermode的一些使用问题</h1><h2 id="一-PorterDuff-Mode使用问题"><a href="#一-PorterDuff-Mode使用问题" class="headerlink" title="一 PorterDuff.Mode使用问题"></a>一 PorterDuff.Mode使用问题</h2><h4 id="1-1-PorterDuff-Mode-CLEAR"><a href="#1-1-PorterDuff-Mode-CLEAR" class="headerlink" title="1.1  PorterDuff.Mode.CLEAR"></a>1.1  <strong><em>PorterDuff.Mode.CLEAR</em></strong></h4><ul><li><p>正常效果</p><p>  <img src="android_26_PorterDuff_Mode_CLEAR.jpg" alt="android_26_PorterDuff_Mode_CLEAR"></p></li></ul><ul><li><p>targetSdkVersion 28</p><p>  <img src="android_28_PorterDuff_Mode_CLEAR.jpg" alt="android_28_PorterDuff_Mode_CLEAR"></p></li></ul><h4 id="1-2-PorterDuff-Mode"><a href="#1-2-PorterDuff-Mode" class="headerlink" title="1.2 PorterDuff.Mode"></a>1.2 PorterDuff.Mode</h4><p>PorterDuff.Mode 官方效果<br><a href="https://developer.android.com/reference/android/graphics/PorterDuff.Mode.html" target="_blank" rel="noopener">https://developer.android.com/reference/android/graphics/PorterDuff.Mode.html</a></p><p>1.2 PorterDuffXfermode 在Android 27 和 28 的实际效果</p><ul><li><p>PorterDuffXfermode_27</p><p>  <img src="PorterDuffXfermode_27.png" alt="PorterDuffXfermode_27"></p></li><li><p>PorterDuffXfermode_28</p><p>  <img src="PorterDuffXfermode_28.png" alt="PorterDuffXfermode_28"></p></li></ul><p><a href="https://stackoverflow.com/questions/51538443/xfermode-in-android-p-beta?noredirect=1#comment90044905_51538443" target="_blank" rel="noopener">图片来源</a>    </p><h3 id="二-绘制时-canvas-画布不同导致的问题"><a href="#二-绘制时-canvas-画布不同导致的问题" class="headerlink" title="二 绘制时 canvas 画布不同导致的问题"></a>二 绘制时 canvas 画布不同导致的问题</h3><p>after change another canvas ,PorterDuffXfermode(PorterDuff.Mode.CLEAR) is not work</p><p>创建 另一个 画布</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//保存没有背景的截图</span><br><span class="line">screenShotBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)</span><br><span class="line">mScreenShotCanvas = Canvas(screenShotBitmap)</span><br></pre></td></tr></table></figure><h3 id="dispatchDraw"><a href="#dispatchDraw" class="headerlink" title="dispatchDraw"></a>dispatchDraw</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    override fun dispatchDraw(canvas: Canvas?) &#123;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">        //7.绘制蒙版</span><br><span class="line">        drawMask(canvas)</span><br><span class="line">       ....</span><br><span class="line"></span><br><span class="line">        //截图</span><br><span class="line">        mScreenShotCanvas?.let &#123; canvas -&gt;</span><br><span class="line">           ...</span><br><span class="line">            //7.绘制蒙版</span><br><span class="line">            drawMask(canvas, true)</span><br><span class="line">           ...</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>问题 传入的canvas 不同</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 绘制蒙版</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">private fun drawMask(canvas: Canvas, shotScreen: Boolean = false) &#123;</span><br><span class="line">    try &#123;//qtip rl_frame_content -&gt; 相框外层容器</span><br><span class="line"></span><br><span class="line">        rl_frame_content?.let &#123;</span><br><span class="line">            //先获取相框外层容器的位置</span><br><span class="line">            val rlLeft = it.left</span><br><span class="line">            val rlTop = it.top</span><br><span class="line">            mGpuIV?.let &#123; gpuIv -&gt;</span><br><span class="line"></span><br><span class="line">                mMaskBitmap?.let &#123; mask -&gt;</span><br><span class="line"></span><br><span class="line">                    //获取相片和相框外侧之间的位置关系</span><br><span class="line"></span><br><span class="line">                    val gpuIvLeft = rl_gpu_iv_content_trim.left</span><br><span class="line">                    val gpuIvTop = rl_gpu_iv_content_trim.top</span><br><span class="line"></span><br><span class="line">                    val gpuIvWidth = rl_gpu_iv_content_trim.width</span><br><span class="line">                    val gpuIvHeight = rl_gpu_iv_content_trim.height</span><br><span class="line"></span><br><span class="line">                    val newWidth = gpuIvWidth - 2 * mMaskMargin</span><br><span class="line">                    val newHeight = gpuIvHeight - 2 * mMaskMargin</span><br><span class="line"></span><br><span class="line">                    //缩放后的蒙版(根据图片的大小调整蒙版大小)</span><br><span class="line">                    if (mScaledMaskBitmap == null) &#123;</span><br><span class="line">                        mScaledMaskBitmap = BitmapUtils.scaleBitmapInMaxWidthOrHeight(mask, newWidth, newHeight)</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                      mScaledMaskBitmap?.let &#123; scaleMask -&gt;</span><br><span class="line">                            //绘制mask</span><br><span class="line">                            val left = rlLeft.toFloat() + gpuIvLeft</span><br><span class="line">                            val top = rlTop.toFloat() + gpuIvTop</span><br><span class="line"></span><br><span class="line">                            //1.离屏画布</span><br><span class="line">                            val save = canvas.saveLayer(left, top, left + gpuIvWidth, top + gpuIvHeight, null, Canvas.ALL_SAVE_FLAG)</span><br><span class="line">                            //2.绘制带颜色蒙版 创建大小和 rl_frame_content 一样的蒙版</span><br><span class="line">                            val dstBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)</span><br><span class="line">                            //创建蒙版画布</span><br><span class="line">                            val dstCav = Canvas(dstBitmap)</span><br><span class="line">                            //蒙版颜色</span><br><span class="line">                            dstCav.drawColor(mMaskColor)</span><br><span class="line">                            canvas.drawBitmap(dstBitmap, left, top, null)</span><br><span class="line"></span><br><span class="line">                            //3.蒙版掏空出透明形状区域</span><br><span class="line">                            val paintMask = Paint()</span><br><span class="line">                            paintMask.isAntiAlias = true</span><br><span class="line">                            paintMask.xfermode = PorterDuffXfermode(PorterDuff.Mode.CLEAR)</span><br><span class="line">                            //蒙版位置居中</span><br><span class="line">                            canvas.drawBitmap(scaleMask, left + (gpuIvWidth - scaleMask.width) / 2, top + (gpuIvHeight - scaleMask.height) / 2, paintMask)</span><br><span class="line"></span><br><span class="line">                            //4.画布恢复</span><br><span class="line">                            canvas.restoreToCount(save)</span><br><span class="line">                        &#125;                     &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (e: Exception) &#123;</span><br><span class="line">        QLogger.e(e)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="需要的效果"><a href="#需要的效果" class="headerlink" title="需要的效果"></a>需要的效果</h3><p><img src="inside_08.png" alt="蒙版"></p><p><img src="%E8%92%99%E7%89%88%E5%BD%A2%E7%8A%B6%E5%A4%B1%E8%B4%A5_01.png" alt="蒙版形状失败_01.png"></p><h3 id="截图时实际效果"><a href="#截图时实际效果" class="headerlink" title="截图时实际效果"></a>截图时实际效果</h3><p><img src="%E8%92%99%E7%89%88%E5%BD%A2%E7%8A%B6%E5%A4%B1%E8%B4%A5_02.png" alt="蒙版形状失败_02.png"></p><p>并不是 <code>paintMask.xfermode = PorterDuffXfermode(PorterDuff.Mode.CLEAR)</code><br>无效 而是 clear的区域不是 图片的非透明区而是 整个图片</p><ul><li>解决问题</li></ul><p>// QTIP: 2019-07-23 修改 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PorterDuff.Mode.CLEAR</span><br></pre></td></tr></table></figure><p>为 <strong><em>PorterDuff.Mode.DST_OUT</em></strong> 或者 <strong><em>PorterDuff.Mode.XOR</em></strong></p><p>待解决疑问 : Android api 28 以下  传入有bitmap的canvas 绘制时 PorterDuff.Mode.CLEAR  无效</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><strong><em><a href="https://stackoverflow.com/questions/51538443/xfermode-in-android-p-beta?noredirect=1#comment90044905_51538443" target="_blank" rel="noopener">https://stackoverflow.com/questions/51538443/xfermode-in-android-p-beta?noredirect=1#comment90044905_51538443</a></em></strong></p><p><a href="https://stackoverflow.com/questions/10494442/android-paint-porterduff-mode-clear?rq=1" target="_blank" rel="noopener">https://stackoverflow.com/questions/10494442/android-paint-porterduff-mode-clear?rq=1</a></p><p><a href="https://issuetracker.google.com/issues/111819103" target="_blank" rel="noopener">https://issuetracker.google.com/issues/111819103</a></p><p><a href="https://stackoverflow.com/questions/56189189/android-in-android-pie-api-28-radialgradient-draws-a-rectangle-instead-of-a?rq=1" target="_blank" rel="noopener">https://stackoverflow.com/questions/56189189/android-in-android-pie-api-28-radialgradient-draws-a-rectangle-instead-of-a?rq=1</a></p><p><a href="https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/graphics/Xfermodes.java" target="_blank" rel="noopener">https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/graphics/Xfermodes.java</a></p><p>关联下 <a href="https://github.com/googlesamples/android-ClippingBasic" target="_blank" rel="noopener">ViewOutlineProvider</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Interface by which a View builds its &#123;@link Outline&#125;, used for shadow casting and clipping.</span><br><span class="line"> */</span><br><span class="line">public abstract class ViewOutlineProvider &#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;PorterDuffXfermode的一些使用问题&quot;&gt;&lt;a href=&quot;#PorterDuffXfermode的一些使用问题&quot; class=&quot;headerlink&quot; title=&quot;PorterDuffXfermode的一些使用问题&quot;&gt;&lt;/a&gt;PorterDuffX
      
    
    </summary>
    
      <category term="Android" scheme="http://qingyc.github.io/categories/Android/"/>
    
    
      <category term="Android" scheme="http://qingyc.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>开始整理下吧 ...</title>
    <link href="http://qingyc.github.io/2019/07/21/HelloWorld/"/>
    <id>http://qingyc.github.io/2019/07/21/HelloWorld/</id>
    <published>2019-07-20T17:01:10.000Z</published>
    <updated>2019-08-18T08:29:34.259Z</updated>
    
    <content type="html"><![CDATA[<p><img src="wuming.jpg" alt="wuming"></p><p>开始整理下吧 啦啦啦…..</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;wuming.jpg&quot; alt=&quot;wuming&quot;&gt;&lt;/p&gt;
&lt;p&gt;开始整理下吧 啦啦啦…..&lt;/p&gt;

      
    
    </summary>
    
      <category term="qing" scheme="http://qingyc.github.io/categories/qing/"/>
    
    
  </entry>
  
  <entry>
    <title>hexo-github-pages</title>
    <link href="http://qingyc.github.io/2019/07/20/hexo-github-pages/"/>
    <id>http://qingyc.github.io/2019/07/20/hexo-github-pages/</id>
    <published>2019-07-20T09:17:53.000Z</published>
    <updated>2019-07-20T16:57:35.557Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hexo-github-pages-搭建个人博客"><a href="#Hexo-github-pages-搭建个人博客" class="headerlink" title="Hexo + github pages 搭建个人博客"></a>Hexo + github pages 搭建个人博客</h1><h2 id="一-Hexo"><a href="#一-Hexo" class="headerlink" title="一 Hexo"></a>一 Hexo</h2><p>啥是 Hexo</p><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p></blockquote><p>官方文档</p><p><a href="https://hexo.io/zh-cn/docs/setup" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/setup</a></p><h3 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1 安装"></a>1.1 安装</h3><h4 id="前提-先安装"><a href="#前提-先安装" class="headerlink" title="前提  先安装"></a>前提  先安装</h4><p>Node.js (Should be at least nodejs 6.9)</p><p>Git</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3 id="1-2-使用"><a href="#1-2-使用" class="headerlink" title="1.2 使用"></a>1.2 使用</h3><ul><li><p>初始化</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></li><li><p>生成静态文件</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>运行</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure></li><li><p>部署</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>  <a href="https://hexo.io/zh-cn/docs/deployment" target="_blank" rel="noopener">详细部署说明</a></p></li></ul><h2 id="2-Github-Pages"><a href="#2-Github-Pages" class="headerlink" title="2 Github Pages"></a>2 Github Pages</h2><p><a href="https://pages.github.com/" target="_blank" rel="noopener">https://pages.github.com/</a></p><p><a href="https://help.github.com/en/articles/quick-start-setting-up-a-custom-domain" target="_blank" rel="noopener">自定义域名</a></p><p>先安装插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h3 id="2-1-问题记录"><a href="#2-1-问题记录" class="headerlink" title="2.1 问题记录"></a>2.1 问题记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">and the repository exists.</span><br><span class="line">FATAL Something&apos;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Spawn failed</span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (/Users/xxx/GIT_HEXO_W/xxx.github.io/node_modules/hexo-util/lib/spawn.js:52:19)</span><br></pre></td></tr></table></figure><h4 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h4><p><a href="https://help.github.com/en/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener">生成ssh key </a></p><p><a href="https://help.github.com/en/articles/adding-a-new-ssh-key-to-your-github-account" target="_blank" rel="noopener">添加ssh key </a></p><h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a></p><p><a href="https://github.com/limedroid/HexoLearning" target="_blank" rel="noopener">Hexo 博客搭建指南</a></p><p><a href="https://linghucong.js.org/2016/04/15/2016-04-15-hexo-github-pages-blog/" target="_blank" rel="noopener">手把手教你使用Hexo + Github Pages搭建个人独立博客</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Hexo-github-pages-搭建个人博客&quot;&gt;&lt;a href=&quot;#Hexo-github-pages-搭建个人博客&quot; class=&quot;headerlink&quot; title=&quot;Hexo + github pages 搭建个人博客&quot;&gt;&lt;/a&gt;Hexo + githu
      
    
    </summary>
    
      <category term="Hexo" scheme="http://qingyc.github.io/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://qingyc.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
